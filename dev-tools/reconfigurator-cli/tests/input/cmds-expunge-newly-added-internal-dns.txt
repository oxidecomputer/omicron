load-example

blueprint-show dbcbd3d6-41ff-48ae-ac0b-1becc9b2fd21
# Expunge an internal DNS zone
blueprint-edit dbcbd3d6-41ff-48ae-ac0b-1becc9b2fd21 expunge-zone 5a526763-1d2b-42a5-b2ef-42f58aa8cbfa
# Diff against the new blueprint; internal DNS is not eagerly removed, so DNS records won't have changed
blueprint-diff dbcbd3d6-41ff-48ae-ac0b-1becc9b2fd21 8da82a8e-bf97-4fbd-8ddd-9f6462732cf1

# Mark the internal DNS zone ready for cleanup.
# This approximates sled-agent performing an inventory collection and seeing the DNS zone has gone away.
# Afterward, diffing should show that the server's records are removed from DNS.
blueprint-edit 8da82a8e-bf97-4fbd-8ddd-9f6462732cf1 mark-for-cleanup 5a526763-1d2b-42a5-b2ef-42f58aa8cbfa
blueprint-diff 8da82a8e-bf97-4fbd-8ddd-9f6462732cf1 58d5e830-0884-47d8-a7cd-b2b3751adeb4

# And at this point planning a new blueprint will place a new internal DNS zone and set up its records.
blueprint-plan 58d5e830-0884-47d8-a7cd-b2b3751adeb4
blueprint-diff 58d5e830-0884-47d8-a7cd-b2b3751adeb4 af934083-59b5-4bf6-8966-6fb5292c29e1
