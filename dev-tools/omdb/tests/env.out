EXECUTING COMMAND: omdb ["db", "--db-url", "postgresql://root@[::1]:REDACTED_PORT/omicron?sslmode=disable", "sleds"]
termination: Exited(0)
---------------------------------------------
stdout:
 SERIAL        IP           ROLE      POLICY             STATE   ID                                   
 sim-039be560  [::1]:REDACTED_PORT  scrimlet  not provisionable  active  ..........<REDACTED_UUID>........... 
 sim-b6d65341  [::1]:REDACTED_PORT  scrimlet  in service         active  ..........<REDACTED_UUID>........... 
---------------------------------------------
stderr:
note: using database URL postgresql://root@[::1]:REDACTED_PORT/omicron?sslmode=disable
note: database schema version matches expected (<redacted database version>)
note: listing all commissioned sleds (use -F to filter, e.g. -F in-service)
=============================================
EXECUTING COMMAND: omdb ["db", "--db-url", "junk", "sleds"]
termination: Exited(2)
---------------------------------------------
stdout:
---------------------------------------------
stderr:
error: invalid value 'junk' for '--db-url <DB_URL>': invalid connection string: unexpected EOF

For more information, try '--help'.
=============================================
EXECUTING COMMAND: omdb ["nexus", "--nexus-internal-url", "http://127.0.0.1:REDACTED_PORT", "background-tasks", "doc"]
termination: Exited(0)
---------------------------------------------
stdout:
task: "abandoned_vmm_reaper"
    deletes sled reservations for VMMs that have been abandoned by their
    instances


task: "bfd_manager"
    Manages bidirectional fowarding detection (BFD) configuration on rack
    switches


task: "blueprint_executor"
    Executes the target blueprint


task: "blueprint_loader"
    Loads the current target blueprint from the DB


task: "dns_config_external"
    watches external DNS data stored in CockroachDB


task: "dns_config_internal"
    watches internal DNS data stored in CockroachDB


task: "dns_propagation_external"
    propagates latest external DNS configuration (from "dns_config_external"
    background task) to the latest list of DNS servers (from
    "dns_servers_external" background task)


task: "dns_propagation_internal"
    propagates latest internal DNS configuration (from "dns_config_internal"
    background task) to the latest list of DNS servers (from
    "dns_servers_internal" background task)


task: "dns_servers_external"
    watches list of external DNS servers stored in internal DNS


task: "dns_servers_internal"
    watches list of internal DNS servers stored in internal DNS


task: "external_endpoints"
    reads config for silos and TLS certificates to determine the right set of
    HTTP endpoints, their HTTP server names, and which TLS certificates to use
    on each one


task: "instance_watcher"
    periodically checks instance states


task: "inventory_collection"
    collects hardware and software inventory data from the whole system


task: "metrics_producer_gc"
    unregisters Oximeter metrics producers that have not renewed their lease


task: "nat_v4_garbage_collector"
    prunes soft-deleted IPV4 NAT entries from ipv4_nat_entry table based on a
    predetermined retention policy


task: "phantom_disks"
    detects and un-deletes phantom disks


task: "physical_disk_adoption"
    ensure new physical disks are automatically marked in-service


task: "region_replacement"
    detects if a region requires replacing and begins the process


task: "service_firewall_rule_propagation"
    propagates VPC firewall rules for Omicron services with external network
    connectivity


task: "service_zone_nat_tracker"
    ensures service zone nat records are recorded in NAT RPW table


task: "switch_port_config_manager"
    manages switch port settings for rack switches


task: "v2p_manager"
    manages opte v2p mappings for vpc networking


task: "vpc_route_manager"
    propagates updated VPC routes to all OPTE ports


---------------------------------------------
stderr:
note: using Nexus URL http://127.0.0.1:REDACTED_PORT
=============================================
EXECUTING COMMAND: omdb ["nexus", "--nexus-internal-url", "junk", "background-tasks", "doc"]
termination: Exited(1)
---------------------------------------------
stdout:
---------------------------------------------
stderr:
note: using Nexus URL junk
Error: listing background tasks

Caused by:
    0: Communication Error: builder error: relative URL without a base
    1: builder error: relative URL without a base
    2: relative URL without a base
=============================================
EXECUTING COMMAND: omdb ["nexus", "background-tasks", "doc"]
termination: Exited(0)
---------------------------------------------
stdout:
task: "abandoned_vmm_reaper"
    deletes sled reservations for VMMs that have been abandoned by their
    instances


task: "bfd_manager"
    Manages bidirectional fowarding detection (BFD) configuration on rack
    switches


task: "blueprint_executor"
    Executes the target blueprint


task: "blueprint_loader"
    Loads the current target blueprint from the DB


task: "dns_config_external"
    watches external DNS data stored in CockroachDB


task: "dns_config_internal"
    watches internal DNS data stored in CockroachDB


task: "dns_propagation_external"
    propagates latest external DNS configuration (from "dns_config_external"
    background task) to the latest list of DNS servers (from
    "dns_servers_external" background task)


task: "dns_propagation_internal"
    propagates latest internal DNS configuration (from "dns_config_internal"
    background task) to the latest list of DNS servers (from
    "dns_servers_internal" background task)


task: "dns_servers_external"
    watches list of external DNS servers stored in internal DNS


task: "dns_servers_internal"
    watches list of internal DNS servers stored in internal DNS


task: "external_endpoints"
    reads config for silos and TLS certificates to determine the right set of
    HTTP endpoints, their HTTP server names, and which TLS certificates to use
    on each one


task: "instance_watcher"
    periodically checks instance states


task: "inventory_collection"
    collects hardware and software inventory data from the whole system


task: "metrics_producer_gc"
    unregisters Oximeter metrics producers that have not renewed their lease


task: "nat_v4_garbage_collector"
    prunes soft-deleted IPV4 NAT entries from ipv4_nat_entry table based on a
    predetermined retention policy


task: "phantom_disks"
    detects and un-deletes phantom disks


task: "physical_disk_adoption"
    ensure new physical disks are automatically marked in-service


task: "region_replacement"
    detects if a region requires replacing and begins the process


task: "service_firewall_rule_propagation"
    propagates VPC firewall rules for Omicron services with external network
    connectivity


task: "service_zone_nat_tracker"
    ensures service zone nat records are recorded in NAT RPW table


task: "switch_port_config_manager"
    manages switch port settings for rack switches


task: "v2p_manager"
    manages opte v2p mappings for vpc networking


task: "vpc_route_manager"
    propagates updated VPC routes to all OPTE ports


---------------------------------------------
stderr:
note: Nexus URL not specified.  Will pick one from DNS.
note: using Nexus URL http://[::ffff:127.0.0.1]:REDACTED_PORT
=============================================
EXECUTING COMMAND: omdb ["--dns-server", "[::1]:REDACTED_PORT", "nexus", "background-tasks", "doc"]
termination: Exited(0)
---------------------------------------------
stdout:
task: "abandoned_vmm_reaper"
    deletes sled reservations for VMMs that have been abandoned by their
    instances


task: "bfd_manager"
    Manages bidirectional fowarding detection (BFD) configuration on rack
    switches


task: "blueprint_executor"
    Executes the target blueprint


task: "blueprint_loader"
    Loads the current target blueprint from the DB


task: "dns_config_external"
    watches external DNS data stored in CockroachDB


task: "dns_config_internal"
    watches internal DNS data stored in CockroachDB


task: "dns_propagation_external"
    propagates latest external DNS configuration (from "dns_config_external"
    background task) to the latest list of DNS servers (from
    "dns_servers_external" background task)


task: "dns_propagation_internal"
    propagates latest internal DNS configuration (from "dns_config_internal"
    background task) to the latest list of DNS servers (from
    "dns_servers_internal" background task)


task: "dns_servers_external"
    watches list of external DNS servers stored in internal DNS


task: "dns_servers_internal"
    watches list of internal DNS servers stored in internal DNS


task: "external_endpoints"
    reads config for silos and TLS certificates to determine the right set of
    HTTP endpoints, their HTTP server names, and which TLS certificates to use
    on each one


task: "instance_watcher"
    periodically checks instance states


task: "inventory_collection"
    collects hardware and software inventory data from the whole system


task: "metrics_producer_gc"
    unregisters Oximeter metrics producers that have not renewed their lease


task: "nat_v4_garbage_collector"
    prunes soft-deleted IPV4 NAT entries from ipv4_nat_entry table based on a
    predetermined retention policy


task: "phantom_disks"
    detects and un-deletes phantom disks


task: "physical_disk_adoption"
    ensure new physical disks are automatically marked in-service


task: "region_replacement"
    detects if a region requires replacing and begins the process


task: "service_firewall_rule_propagation"
    propagates VPC firewall rules for Omicron services with external network
    connectivity


task: "service_zone_nat_tracker"
    ensures service zone nat records are recorded in NAT RPW table


task: "switch_port_config_manager"
    manages switch port settings for rack switches


task: "v2p_manager"
    manages opte v2p mappings for vpc networking


task: "vpc_route_manager"
    propagates updated VPC routes to all OPTE ports


---------------------------------------------
stderr:
note: Nexus URL not specified.  Will pick one from DNS.
note: using Nexus URL http://[::ffff:127.0.0.1]:REDACTED_PORT
=============================================
EXECUTING COMMAND: omdb ["db", "sleds"]
termination: Exited(0)
---------------------------------------------
stdout:
 SERIAL        IP           ROLE      POLICY             STATE   ID                                   
 sim-039be560  [::1]:REDACTED_PORT  scrimlet  not provisionable  active  ..........<REDACTED_UUID>........... 
 sim-b6d65341  [::1]:REDACTED_PORT  scrimlet  in service         active  ..........<REDACTED_UUID>........... 
---------------------------------------------
stderr:
note: database URL not specified.  Will search DNS.
note: (override with --db-url or OMDB_DB_URL)
note: using database URL postgresql://root@[::1]:REDACTED_PORT/omicron?sslmode=disable
note: database schema version matches expected (<redacted database version>)
note: listing all commissioned sleds (use -F to filter, e.g. -F in-service)
=============================================
EXECUTING COMMAND: omdb ["--dns-server", "[::1]:REDACTED_PORT", "db", "sleds"]
termination: Exited(0)
---------------------------------------------
stdout:
 SERIAL        IP           ROLE      POLICY             STATE   ID                                   
 sim-039be560  [::1]:REDACTED_PORT  scrimlet  not provisionable  active  ..........<REDACTED_UUID>........... 
 sim-b6d65341  [::1]:REDACTED_PORT  scrimlet  in service         active  ..........<REDACTED_UUID>........... 
---------------------------------------------
stderr:
note: database URL not specified.  Will search DNS.
note: (override with --db-url or OMDB_DB_URL)
note: using database URL postgresql://root@[::1]:REDACTED_PORT/omicron?sslmode=disable
note: database schema version matches expected (<redacted database version>)
note: listing all commissioned sleds (use -F to filter, e.g. -F in-service)
=============================================
