{"saga_name":"finalize-disk","graph":{"nodes":[{"Action":{"name":"disk_generation_number","label":"SetFinalizingState","action_name":"finalize_disk.set_finalizing_state"}},{"Action":{"name":"pantry_address","label":"GetPantryAddress","action_name":"finalize_disk.get_pantry_address"}},{"Constant":{"name":"params_for_snapshot_subsaga","value":{"attach_instance_id":null,"create_params":{"description":"snapshot of finalized disk 26d3a305-c504-4cfb-9be1-b605d9460b38","disk":"26d3a305-c504-4cfb-9be1-b605d9460b38","name":"snap"},"disk_id":"26d3a305-c504-4cfb-9be1-b605d9460b38","project_id":"3e0d9448-113c-48cd-ac4f-bd484418dd65","serialized_authn":{"kind":{"Authenticated":[{"actor":{"SiloUser":{"silo_id":"001de000-5110-4000-8000-000000000000","silo_user_id":"001de000-05e4-4000-8000-000000004007"}}},{"mapped_fleet_roles":{}}]}},"silo_id":"bcb13d85-babe-48de-9a4f-ca31449f6580","use_the_pantry":true}}},{"SubsagaStart":{"saga_name":"snapshot-create","params_node_name":"params_for_snapshot_subsaga"}},{"Action":{"name":"snapshot_id","label":"GenerateSnapshotId","action_name":"common.uuid_generate"}},{"Action":{"name":"volume_id","label":"GenerateVolumeId","action_name":"common.uuid_generate"}},{"Action":{"name":"destination_volume_id","label":"GenerateDestinationVolumeId","action_name":"common.uuid_generate"}},{"Action":{"name":"lock_id","label":"GenerateLockId","action_name":"common.uuid_generate"}},{"Action":{"name":"volume_lock","label":"TakeVolumeLock","action_name":"snapshot_create.take_volume_lock"}},{"Action":{"name":"datasets_and_regions","label":"RegionsAlloc","action_name":"snapshot_create.regions_alloc"}},{"Action":{"name":"regions_ensure_undo","label":"RegionsEnsureUndo","action_name":"snapshot_create.regions_ensure_undo"}},{"Action":{"name":"regions_ensure","label":"RegionsEnsure","action_name":"snapshot_create.regions_ensure"}},{"Action":{"name":"created_destination_volume","label":"CreateDestinationVolumeRecord","action_name":"snapshot_create.create_destination_volume_record"}},{"Action":{"name":"created_snapshot","label":"CreateSnapshotRecord","action_name":"snapshot_create.create_snapshot_record"}},{"Action":{"name":"no_result","label":"SpaceAccount","action_name":"snapshot_create.space_account"}},{"Action":{"name":"pantry_address","label":"GetPantryAddress","action_name":"snapshot_create.get_pantry_address"}},{"Action":{"name":"disk_generation_number","label":"AttachDiskToPantry","action_name":"snapshot_create.attach_disk_to_pantry"}},{"Action":{"name":"call_pantry_attach_for_disk","label":"CallPantryAttachForDisk","action_name":"snapshot_create.call_pantry_attach_for_disk"}},{"Action":{"name":"call_pantry_snapshot_for_disk","label":"CallPantrySnapshotForDisk","action_name":"snapshot_create.call_pantry_snapshot_for_disk"}},{"Action":{"name":"call_pantry_detach_for_disk","label":"CallPantryDetachForDisk","action_name":"snapshot_create.call_pantry_detach_for_disk"}},{"Action":{"name":"ssc_not_used","label":"StartRunningSnapshotUndo","action_name":"snapshot_create.start_running_snapshot_undo"}},{"Action":{"name":"replace_sockets_map","label":"StartRunningSnapshot","action_name":"snapshot_create.start_running_snapshot"}},{"Action":{"name":"created_volume","label":"CreateVolumeRecord","action_name":"snapshot_create.create_volume_record"}},{"Action":{"name":"finalized_snapshot","label":"FinalizeSnapshotRecord","action_name":"snapshot_create.finalize_snapshot_record"}},{"Action":{"name":"detach_disk_from_pantry","label":"DetachDiskFromPantry","action_name":"snapshot_create.detach_disk_from_pantry"}},{"Action":{"name":"volume_unlock","label":"ReleaseVolumeLock","action_name":"snapshot_create.release_volume_lock"}},{"SubsagaEnd":{"name":"snapshot_subsaga_no_result"}},{"Action":{"name":"call_pantry_detach_for_disk","label":"CallPantryDetachForDisk","action_name":"finalize_disk.call_pantry_detach_for_disk"}},{"Action":{"name":"clear_pantry_address","label":"ClearPantryAddress","action_name":"finalize_disk.clear_pantry_address"}},{"Action":{"name":"set_detached_state","label":"SetDetachedState","action_name":"finalize_disk.set_detached_state"}}],"node_holes":[],"edge_property":"directed","edges":[[0,1,null],[1,2,null],[2,3,null],[4,5,null],[5,6,null],[6,7,null],[7,8,null],[8,9,null],[9,10,null],[10,11,null],[11,12,null],[12,13,null],[13,14,null],[14,15,null],[15,16,null],[16,17,null],[17,18,null],[18,19,null],[19,20,null],[20,21,null],[21,22,null],[22,23,null],[23,24,null],[24,25,null],[3,4,null],[25,26,null],[26,27,null],[27,28,null],[28,29,null]]},"first_nodes":[0],"last_nodes":[29]}