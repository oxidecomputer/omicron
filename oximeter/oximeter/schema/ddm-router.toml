format_version = 1

[target]
name = "ddm_router"
description = "A Delay-Driven Multipath (DDM) router"
authz_scope = "fleet"
versions = [
    { version = 1, fields = [ "hostname", "rack_id", "sled_id", "sled_model", "sled_revision", "sled_serial", "switch_id", "switch_model", "switch_revision", "switch_serial", "switch_slot","asic_fab", "asic_lot", "asic_wafer", "asic_wafer_loc_x", "asic_wafer_loc_y" ] },
]

[[metrics]]
name = "originated_tunnel_endpoints"
description = "Current number of tunnel endpoints this router advertises"
units = "count"
datum_type = "u64"
versions = [
    { added_in = 1, fields = [ ] }
]

[[metrics]]
name = "originated_underlay_prefixes"
description = "Current number of prefixes on the underlay network this router advertises"
units = "count"
datum_type = "u64"
versions = [
    { added_in = 1, fields = [ ] }
]

[fields.hostname]
type = "string"
description = "The hostname of the machine running the DDM router"

[fields.rack_id]
type = "uuid"
description = "ID of the rack running the DDM router"

[fields.sled_id]
type = "uuid"
description = "ID of the sled running the DDM router"

[fields.sled_model]
type = "string"
description = "Model number of the sled running the DDM router"

[fields.sled_revision]
type = "u32"
description = "Revision number of the sled running the DDM router"

[fields.sled_serial]
type = "string"
description = "Serial number of the sled running the DDM router"

[fields.switch_id]
type = "uuid"
description = "ID of the switch running the DDM router"

[fields.switch_model]
type = "string"
description = "Model number of the switch running the DDM router"

[fields.switch_revision]
type = "u32"
description = "Revision number of the switch running the DDM router"

[fields.switch_serial]
type = "string"
description = "Serial number of the switch running the DDM router"

[fields.switch_slot]
type = "u16"
description = "Slot number of the switch running the DDM router"

[fields.asic_fab]
type = "string"
description = "Fabrication plant identifier of the switch ASIC running the DDM router"

[fields.asic_lot]
type = "string"
description = "Lot identifier of the switch ASIC running the DDM router"

[fields.asic_wafer]
type = "u8"
description = "Wafer identifier of the switch ASIC running the DDM router"

[fields.asic_wafer_loc_x]
type = "i16"
description = "X-coordinate wafer location of the switch ASIC running the DDM router"

[fields.asic_wafer_loc_y]
type = "i16"
description = "Y-coordinate wafer location of the switch ASIC running the DDM router"
