format_version = 1

[target]
name = "instance_data_link"
description = "A network data link attached to a virtual machine instance"
authz_scope = "fleet"
versions = [
    { version = 1, fields = [ "interface_id", "instance_id", "project_id", "silo_id", "sled_id", "sled_model", "sled_revision", "sled_serial" ] },
]

[[metrics]]
name = "bytes_sent"
description = "Total number of bytes sent on the data link"
units = "bytes"
datum_type = "cumulative_u64"
versions = [
    { added_in = 1, fields = [] }
]

[[metrics]]
name = "bytes_received"
description = "Total number of bytes received on the data link"
units = "bytes"
datum_type = "cumulative_u64"
versions = [
    { added_in = 1, fields = [] }
]

[[metrics]]
name = "packets_sent"
description = "Total number of packets sent on the data link"
units = "count"
datum_type = "cumulative_u64"
versions = [
    { added_in = 1, fields = [] }
]

[[metrics]]
name = "packets_received"
description = "Total number of packets received on the data link"
units = "count"
datum_type = "cumulative_u64"
versions = [
    { added_in = 1, fields = [] }
]

[[metrics]]
name = "packets_dropped"
description = "Number of packets dropped on the RX queue of the data link"
units = "count"
datum_type = "cumulative_u64"
versions = [
    { added_in = 1, fields = [] }
]

[fields.interface_id]
type = "uuid"
description = "The ID of the data link"

[fields.instance_id]
type = "uuid"
description = "The ID of the virtual machine instance this link is attached to"

[fields.project_id]
type = "uuid"
description = "The ID of the project containing the virtual machine instance this link is attached to"

[fields.silo_id]
type = "uuid"
description = "The ID of the silo containing the virtual machine instance this link is attached to"

[fields.sled_id]
type = "uuid"
description = "The ID of the sled managing the virtual machine this link is attached to"

[fields.sled_model]
type = "string"
description = "The model number of the sled managing the virtual machine the link is attached to"

[fields.sled_revision]
type = "u32"
description = "The revision number of the sled managing the virtual machine this link is attached to"

[fields.sled_serial]
type = "string"
description = "The serial number of the sled managing the virtual machine this link is attached to"
