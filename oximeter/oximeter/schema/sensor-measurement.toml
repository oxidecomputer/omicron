format_version = 1

[target]
name = "sled_component"
description = "A component on a compute sled which reports sensor measurements"
authz_scope = "fleet"
versions = [
    { version = 1, fields = [
        "rack_id",
        "sled_id",
        "sled_model",
        "sled_revision",
        "sled_serial",
        "component",
        "device",
    ]}
]

# [target]
# name = "switch_component"
# description = "A component on a rack switch which reports sensor measurements"
# authz_scope = "fleet"
# versions = [
#     { version = 1, fields = [
#         "rack_id",
#         "switch_id",
#         "switch_revision",
#         "switch_component",
#         "switch_serial",
#         "component",
#         "device",
#     ]}
# ]

[fields.rack_id]
type = "uuid"
description = "ID for the sled's rack"

[fields.sled_id]
type = "uuid"
description = "ID for the sled"

[fields.sled_model]
type = "string"
description = "Model number of the the sled"

[fields.sled_revision]
type = "u32"
description = "Revision number of the sled"

[fields.sled_serial]
type = "string"
description = "Serial number of the sled"

[fields.switch_id]
type = "uuid"
description = "ID for the switch"

[fields.switch_model]
type = "string"
description = "Model number of the the switch"

[fields.switch_revision]
type = "u32"
description = "Revision number of the switch"

[fields.switch_serial]
type = "string"
description = "Serial number of the switch"

[fields.component]
type = "string"
description = "The service processor component ID uniquely identifying the component on the sled"

[fields.device]
type = "string"
description = "The name of the device which recorded a sensor reading"

[fields.measurement]
type = "string"
description = "A name identifying the quantity measured by a sensor measurement"

[fields.error]
type = "string"
description = "A string identifying the type of sensor error that occurred"

[[metrics]]
name = "temperature"
description = "Temperature reading in degrees Celcius"
units = "degrees_celcius"
datum_type = "f32"
versions = [
    { added_in = 1, fields = ["measurement"]}
]

[[metrics]]
name = "current"
description = "Electric current reading in amperes"
units = "amps"
datum_type = "f32"
versions = [
    { added_in = 1, fields = ["measurement"]}
]

[[metrics]]
name = "voltage"
description = "A voltage reading"
units = "volts"
datum_type = "f32"
versions = [
    { added_in = 1, fields = ["measurement"]}
]

[[metrics]]
name = "fan_speed"
description = "A fan speed measurement, in rotations per minute"
units = "rpm"
datum_type = "f32"
versions = [
    { added_in = 1, fields = ["measurement"]}
]

[[metrics]]
name = "sensor_error_count"
description = "Cumulative count of errors reported by a sensor"
units = "count"
datum_type = "cumulative_u64"
versions = [
    { added_in = 1, fields = ["measurement", "error"]}
]
